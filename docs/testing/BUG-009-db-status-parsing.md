# BUG-009: docker_db_status –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ—á–µ—Ä–∫–∏ –≤–º–µ—Å—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–π

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û  
**–î–∞—Ç–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:** 2026-01-10  
**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2026-01-10

## –û–ø–∏—Å–∞–Ω–∏–µ

`docker_db_status` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ—á–µ—Ä–∫–∏ (`-------`, `------------------`) –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è `size`, `connections`, –∏ `uptime`.

## –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ

```bash
docker_db_status({service: "postgres", profile: "zaicylab", project: "alina"})
```

## –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```json
{
  "type": "postgresql",
  "version": "15.4",
  "status": "healthy",
  "size": "-------",
  "connections": null,
  "uptime": "------------------"
}
```

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```json
{
  "type": "postgresql",
  "version": "15.4",
  "status": "healthy",
  "size": "8192 kB",
  "connections": 3,
  "uptime": "2 days 05:30:15"
}
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

1. **–ü—Ä–æ–±–ª–µ–º–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ psql output** - `parseSingleValue()` –Ω–µ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã
2. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ psql** - –≤–æ–∑–º–æ–∂–Ω–æ –Ω—É–∂–µ–Ω –¥—Ä—É–≥–æ–π output format (–Ω–µ `table`, –∞ `csv` –∏–ª–∏ `json`)
3. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** - –±–∞–∑–∞ –º–æ–∂–µ—Ç –Ω–µ –æ—Ç–¥–∞–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –±–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–∞–≤
4. **–í–µ—Ä—Å–∏—è PostgreSQL** - pgvector –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ –º–µ—Ç–æ–¥–µ `parseSingleValue()` –≤ `PostgreSQLAdapter`.

**–°—Ç–∞—Ä—ã–π –∫–æ–¥:**
```typescript
const dataLine = lines[1];  // ‚ùå –ë—Ä–∞–ª —Å—Ç—Ä–æ–∫—É —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º "-------"
return dataLine.trim();
```

**–ù–æ–≤—ã–π –∫–æ–¥:**
```typescript
// psql table format:
// Line 0: column header (e.g., " size ")
// Line 1: separator (e.g., "-------")
// Line 2: actual data (e.g., " 11 MB")
// Line 3: row count (e.g., "(1 row)")

const dataLine = lines.length >= 3 ? lines[2] : lines[1];  // ‚úÖ –ë–µ—Ä–µ—Ç —Å—Ç—Ä–æ–∫—É —Å –¥–∞–Ω–Ω—ã–º–∏
return dataLine.trim();
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

```json
{
  "type": "postgresql",
  "version": "15.4",
  "status": "healthy",
  "size": "11 MB",           // ‚úÖ –ë—ã–ª–æ: "-------"
  "connections": 2,          // ‚úÖ –ë—ã–ª–æ: null
  "uptime": "54 days 16:56:11"  // ‚úÖ –ë—ã–ª–æ: "------------------"
}
```

**–§–∞–π–ª –∏–∑–º–µ–Ω–µ–Ω:**
- `src/adapters/postgresql.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `parseSingleValue()`
