# Sprint 2: Database Adapters

**–°—Ç–∞—Ç—É—Å:** ‚è≥ –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è  
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 1 –Ω–µ–¥–µ–ª—è (5 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –í—ã—Å–æ–∫–∏–π

---

## üéØ –¶–µ–ª—å –°–ø—Ä–∏–Ω—Ç–∞

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –∞–¥–∞–ø—Ç–µ—Ä—ã. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–ø—Ä–∏–Ω—Ç–∞ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å SQL –∑–∞–ø—Ä–æ—Å—ã, —Å–æ–∑–¥–∞–≤–∞—Ç—å –±—ç–∫–∞–ø—ã –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞.

---

## üìã –ó–∞–¥–∞—á–∏

### –î–µ–Ω—å 1: Database Adapter Infrastructure

#### –ó–∞–¥–∞—á–∞ 2.1: Database Adapter Interface
- [ ] –°–æ–∑–¥–∞—Ç—å `src/adapters/database-adapter.ts`
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `DatabaseAdapter`
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø—ã: `QueryOptions`, `BackupOptions`, `RestoreOptions`, `DBStatus`, `ConnectionInfo`
- [ ] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –∏–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–§–∞–π–ª—ã:**
- `src/adapters/database-adapter.ts`
- `src/adapters/types.ts`

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
```typescript
interface DatabaseAdapter {
  query(service: string, query: string, options?: QueryOptions): Promise<string>;
  backup(service: string, options: BackupOptions): Promise<string>;
  restore(service: string, backupPath: string, options?: RestoreOptions): Promise<void>;
  status(service: string): Promise<DBStatus>;
  getConnectionInfo(service: ServiceConfig, env: Record<string, string>): ConnectionInfo;
}
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
- ‚úÖ –í—Å–µ —Ç–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≥–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

#### –ó–∞–¥–∞—á–∞ 2.2: Adapter Registry
- [ ] –°–æ–∑–¥–∞—Ç—å `src/adapters/adapter-registry.ts`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∞–¥–∞–ø—Ç–µ—Ä–æ–≤ –ø–æ —Ç–∏–ø—É –ë–î
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–¥–∞–ø—Ç–µ—Ä–∞ –ø–æ —Ç–∏–ø—É —Å–µ—Ä–≤–∏—Å–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å fallback –Ω–∞ generic adapter (–µ—Å–ª–∏ —Ç–∏–ø –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –∞–¥–∞–ø—Ç–µ—Ä–∞

**–§–∞–π–ª—ã:**
- `src/adapters/adapter-registry.ts`

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –∞–¥–∞–ø—Ç–µ—Ä—ã –ø–æ —Ç–∏–ø–∞–º (postgresql, redis, sqlite)
- ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç –∞–¥–∞–ø—Ç–µ—Ä –ø–æ —Ç–∏–ø—É —Å–µ—Ä–≤–∏—Å–∞
- ‚úÖ –í—ã–¥–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω—É—é –æ—à–∏–±–∫—É –µ—Å–ª–∏ –∞–¥–∞–ø—Ç–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ (postgres/postgresql)

**–ü—Ä–∏–º–µ—Ä:**
```typescript
const registry = new AdapterRegistry();
registry.register('postgresql', new PostgreSQLAdapter());
registry.register('postgres', new PostgreSQLAdapter()); // alias
registry.register('redis', new RedisAdapter());

const adapter = registry.get('postgresql');
// ‚Üí PostgreSQLAdapter
```

---

### –î–µ–Ω—å 2: PostgreSQL Adapter

#### –ó–∞–¥–∞—á–∞ 2.3: PostgreSQL Adapter ‚Äî Query
- [ ] –°–æ–∑–¥–∞—Ç—å `src/adapters/postgresql.ts`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `query()` –º–µ—Ç–æ–¥
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `docker_exec` –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `psql`
- [ ] –ü–∞—Ä—Å–∏—Ç—å connection info –∏–∑ environment
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: `database`, `user`, `format`
- [ ] –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫–∏ SQL

**–§–∞–π–ª—ã:**
- `src/adapters/postgresql.ts`

**Connection Info:**
```typescript
// –ò–∑ environment:
POSTGRES_USER=user
POSTGRES_PASSWORD=password
POSTGRES_DB=mydb

// –ò–ª–∏ –∏–∑ docker-compose.yml:
environment:
  POSTGRES_USER: user
  POSTGRES_DB: mydb
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- ‚úÖ –í—ã–ø–æ–ª–Ω—è–µ—Ç SQL –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ psql
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç credentials –∏–∑ environment
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ table
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ SQL
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –≤—ã–≤–æ–¥–∞ (table/json/csv)

---

#### –ó–∞–¥–∞—á–∞ 2.4: PostgreSQL Adapter ‚Äî Backup/Restore
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `backup()` –º–µ—Ç–æ–¥
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `pg_dump` —Å —Ä–∞–∑–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ (custom, sql, tar)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `restore()` –º–µ—Ç–æ–¥
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `pg_restore` –¥–ª—è custom —Ñ–æ—Ä–º–∞—Ç–æ–≤
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `psql` –¥–ª—è SQL —Ñ–æ—Ä–º–∞—Ç–æ–≤
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: `format`, `compress`, `tables`, `clean`

**–§–∞–π–ª—ã:**
- `src/adapters/postgresql.ts`

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç backup –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏–∑ backup
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç backup –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç clean restore (DROP before restore)
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ backup/restore

**–ü—Ä–∏–º–µ—Ä:**
```typescript
// Backup
const backupPath = await adapter.backup('postgres', {
  format: 'custom',
  output: './backup.dump'
});

// Restore
await adapter.restore('postgres', './backup.dump', {
  clean: true
});
```

---

#### –ó–∞–¥–∞—á–∞ 2.5: PostgreSQL Adapter ‚Äî Status
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `status()` –º–µ—Ç–æ–¥
- [ ] –ü–æ–ª—É—á–∏—Ç—å –≤–µ—Ä—Å–∏—é PostgreSQL (`SELECT version()`)
- [ ] –ü–æ–ª—É—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –ë–î (`pg_database_size`)
- [ ] –ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π (`pg_stat_activity`)
- [ ] –ü–æ–ª—É—á–∏—Ç—å uptime
- [ ] –°–æ–±—Ä–∞—Ç—å –≤—Å—ë –≤ `DBStatus` –æ–±—ä–µ–∫—Ç

**–§–∞–π–ª—ã:**
- `src/adapters/postgresql.ts`

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–µ—Ä—Å–∏—é PostgreSQL
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ë–î –≤ —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç uptime
- ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ

---

### –î–µ–Ω—å 3: Redis Adapter

#### –ó–∞–¥–∞—á–∞ 2.6: Redis Adapter ‚Äî Query
- [ ] –°–æ–∑–¥–∞—Ç—å `src/adapters/redis.ts`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `query()` –º–µ—Ç–æ–¥
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `redis-cli` –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –≤—Å–µ Redis –∫–æ–º–∞–Ω–¥—ã (GET, SET, KEYS, INFO –∏ —Ç.–¥.)
- [ ] –ü–∞—Ä—Å–∏—Ç—å connection info –∏–∑ environment

**–§–∞–π–ª—ã:**
- `src/adapters/redis.ts`

**Connection Info:**
```typescript
// Redis –Ω–µ —Ç—Ä–µ–±—É–µ—Ç user –æ–±—ã—á–Ω–æ, —Ç–æ–ª—å–∫–æ password (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
REDIS_PASSWORD=secret  // –µ—Å–ª–∏ –Ω—É–∂–µ–Ω

// –ò–∑ docker-compose.yml:
environment:
  REDIS_PASSWORD: secret
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- ‚úÖ –í—ã–ø–æ–ª–Ω—è–µ—Ç Redis –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ redis-cli
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã (GET, SET, KEYS, INFO –∏ —Ç.–¥.)
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–∞—Ä–æ–ª—å –µ—Å–ª–∏ –Ω—É–∂–µ–Ω
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

#### –ó–∞–¥–∞—á–∞ 2.7: Redis Adapter ‚Äî Backup/Restore
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `backup()` –º–µ—Ç–æ–¥
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `SAVE` –∏–ª–∏ `BGSAVE` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è dump.rdb
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å dump.rdb –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `restore()` –º–µ—Ç–æ–¥
- [ ] –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Redis, –∑–∞–º–µ–Ω–∏—Ç—å dump.rdb, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: `output`

**–§–∞–π–ª—ã:**
- `src/adapters/redis.ts`

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç backup (dump.rdb)
- ‚úÖ –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏–∑ backup
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç/–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç Redis

**–ü—Ä–∏–º–µ—Ä:**
```typescript
// Backup
const backupPath = await adapter.backup('redis', {
  output: './redis-backup.rdb'
});

// Restore
await adapter.restore('redis', './redis-backup.rdb');
```

---

#### –ó–∞–¥–∞—á–∞ 2.8: Redis Adapter ‚Äî Status
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `status()` –º–µ—Ç–æ–¥
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `INFO` –∫–æ–º–∞–Ω–¥—É
- [ ] –ü–∞—Ä—Å–∏—Ç—å INFO –≤—ã–≤–æ–¥ (–≤–µ—Ä—Å–∏—è, –ø–∞–º—è—Ç—å, uptime, keys, clients)
- [ ] –°–æ–±—Ä–∞—Ç—å –≤—Å—ë –≤ `DBStatus` –æ–±—ä–µ–∫—Ç

**–§–∞–π–ª—ã:**
- `src/adapters/redis.ts`

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–µ—Ä—Å–∏—é Redis
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç uptime
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª—é—á–µ–π
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

---

### –î–µ–Ω—å 4: SQLite Adapter

#### –ó–∞–¥–∞—á–∞ 2.9: SQLite Adapter ‚Äî Query
- [ ] –°–æ–∑–¥–∞—Ç—å `src/adapters/sqlite.ts`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `query()` –º–µ—Ç–æ–¥
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `sqlite3` –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—É—Ç—å –∫ –ë–î –∏–∑ environment –∏–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å SQLite –º–µ—Ç–∞-–∫–æ–º–∞–Ω–¥—ã (`.tables`, `.schema`)

**–§–∞–π–ª—ã:**
- `src/adapters/sqlite.ts`

**Database Path:**
```typescript
// –ò–∑ environment:
SQLITE_DATABASE=/app/db.sqlite3

// –ò–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
/app/db.sqlite3
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- ‚úÖ –í—ã–ø–æ–ª–Ω—è–µ—Ç SQL –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ sqlite3
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—É—Ç—å –∫ –ë–î
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–µ—Ç–∞-–∫–æ–º–∞–Ω–¥—ã
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏

---

#### –ó–∞–¥–∞—á–∞ 2.10: SQLite Adapter ‚Äî Backup/Restore/Status
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `backup()` –º–µ—Ç–æ–¥ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.backup` –∫–æ–º–∞–Ω–¥—É)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `restore()` –º–µ—Ç–æ–¥ (–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `status()` –º–µ—Ç–æ–¥
- [ ] –ü–æ–ª—É—á–∏—Ç—å –≤–µ—Ä—Å–∏—é SQLite
- [ ] –ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–±–ª–∏—Ü
- [ ] –°–æ–±—Ä–∞—Ç—å –≤—Å—ë –≤ `DBStatus` –æ–±—ä–µ–∫—Ç

**–§–∞–π–ª—ã:**
- `src/adapters/sqlite.ts`

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç backup —Ñ–∞–π–ª
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏–∑ backup
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –ë–î
- ‚úÖ –í—Å–µ –º–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### –î–µ–Ω—å 5: Database MCP Tools + Integration

#### –ó–∞–¥–∞—á–∞ 2.11: Database MCP Tools ‚Äî 4 –∫–æ–º–∞–Ω–¥—ã
- [ ] –°–æ–∑–¥–∞—Ç—å `src/tools/database-tools.ts`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `docker_db_query`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `docker_db_backup`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `docker_db_restore`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `docker_db_status`
- [ ] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ tools –≤ MCP server

**–§–∞–π–ª—ã:**
- `src/tools/database-tools.ts`
- `src/index.ts` (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è tools)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- ‚úÖ –í—Å–µ 4 –∫–æ–º–∞–Ω–¥—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –ö–∞–∂–¥–∞—è –∫–æ–º–∞–Ω–¥–∞ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å–∏–≥–Ω–∞—Ç—É—Ä—É
- [ ] –ö–æ–º–∞–Ω–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç Adapter Registry
- ‚úÖ –û—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ MCP
- ‚úÖ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞

---

#### –ó–∞–¥–∞—á–∞ 2.12: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è + –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å PostgreSQL –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Redis –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å SQLite –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å backup/restore –¥–ª—è –≤—Å–µ—Ö –ë–î
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –±–∞–≥–∏
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

**–¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π (PostgreSQL):**
```typescript
// 1. Query
docker_db_query('postgres', 'SELECT * FROM users LIMIT 5;')

// 2. Backup
docker_db_backup('postgres', './backup.dump')

// 3. Restore
docker_db_restore('postgres', './backup.dump')

// 4. Status
docker_db_status('postgres')
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- ‚úÖ –í—Å–µ –∞–¥–∞–ø—Ç–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö
- ‚úÖ Backup/restore –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤
- ‚úÖ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –£—Å–ø–µ—Ö–∞

- ‚úÖ –í—Å–µ 3 –∞–¥–∞–ø—Ç–µ—Ä–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (PostgreSQL, Redis, SQLite)
- ‚úÖ –í—Å–µ 4 database –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ Backup/restore –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –≤—Å–µ—Ö –ë–î
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞—Ö —Å PostgreSQL/Redis/SQLite
- ‚úÖ –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –î–æ–∫—É–º–µ–Ω—Ç—ã

- [Database Adapters Guide](../../DATABASE_ADAPTERS.md)
- [API Reference](../../API_REFERENCE.md) ‚Äî Database commands
- [Sprint 1: MVP](./SPRINT_1_MVP.md)
- [Sprint 3: Polish](./SPRINT_3_POLISH.md)

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- **Connection Info:** –í—Å–µ –∞–¥–∞–ø—Ç–µ—Ä—ã –ø–æ–ª—É—á–∞—é—Ç credentials –∏–∑ environment –∏–ª–∏ docker-compose.yml
- **Error Handling:** –í—Å–µ –æ—à–∏–±–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Database connection failed: password incorrect")
- **Testing:** –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö, unit tests –≤ Sprint 3

---

**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 2025-01-XX  
**–í–µ—Ä—Å–∏—è:** 1.0

