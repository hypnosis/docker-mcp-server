<?xml version="1.0" encoding="UTF-8"?>
<graphml xmlns="http://graphml.graphdrawing.org/xmlns"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns
         http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd">
  
  <!-- Key definitions for node styling -->
  <key id="nodeType" for="node" attr.name="type" attr.type="string"/>
  <key id="nodeLabel" for="node" attr.name="label" attr.type="string"/>
  <key id="nodeColor" for="node" attr.name="color" attr.type="string"/>
  <key id="edgeType" for="edge" attr.name="type" attr.type="string"/>
  <key id="edgeLabel" for="edge" attr.name="label" attr.type="string"/>
  
  <graph id="docker-mcp-architecture" edgedefault="directed">
    
    <!-- MCP Client Layer -->
    <node id="mcp-client">
      <data key="nodeLabel">MCP Client (Cursor/Claude)</data>
      <data key="nodeType">client</data>
      <data key="nodeColor">#E3F2FD</data>
    </node>
    
    <!-- MCP Server Layer -->
    <node id="mcp-server">
      <data key="nodeLabel">MCP Server (index.ts) ✅</data>
      <data key="nodeType">server</data>
      <data key="nodeColor">#FFF3E0</data>
    </node>
    
    <!-- Project Discovery -->
    <node id="project-discovery">
      <data key="nodeLabel">Project Discovery ✅</data>
      <data key="nodeType">module</data>
      <data key="nodeColor">#E8F5E9</data>
    </node>
    
    <node id="compose-parser">
      <data key="nodeLabel">Compose Parser ✅</data>
      <data key="nodeType">module</data>
      <data key="nodeColor">#E8F5E9</data>
    </node>
    
    <node id="types">
      <data key="nodeLabel">Types (discovery/types.ts) ✅</data>
      <data key="nodeType">module</data>
      <data key="nodeColor">#E8F5E9</data>
    </node>
    
    <!-- Docker Client -->
    <node id="docker-client">
      <data key="nodeLabel">Dockerode Client ✅</data>
      <data key="nodeType">client</data>
      <data key="nodeColor">#F3E5F5</data>
    </node>
    
    <!-- Managers -->
    <node id="container-manager">
      <data key="nodeLabel">Container Manager ✅</data>
      <data key="nodeType">manager</data>
      <data key="nodeColor">#E1F5FE</data>
    </node>
    
    <!-- Tools -->
    <node id="container-tools">
      <data key="nodeLabel">Container Tools (5 commands) ✅</data>
      <data key="nodeType">tools</data>
      <data key="nodeColor">#FCE4EC</data>
    </node>
    
    <node id="executor-tool">
      <data key="nodeLabel">Universal Executor (docker_exec) ✅</data>
      <data key="nodeType">tools</data>
      <data key="nodeColor">#FCE4EC</data>
    </node>
    
    <!-- Docker Engine -->
    <node id="docker-engine">
      <data key="nodeLabel">Docker Engine</data>
      <data key="nodeType">external</data>
      <data key="nodeColor">#E0E0E0</data>
    </node>
    
    <!-- Utilities -->
    <node id="logger">
      <data key="nodeLabel">Logger ✅</data>
      <data key="nodeType">utility</data>
      <data key="nodeColor">#FAFAFA</data>
    </node>
    
    <!-- Edges: MCP Client to Server -->
    <edge id="e1" source="mcp-client" target="mcp-server">
      <data key="edgeLabel">MCP Protocol (STDIO)</data>
      <data key="edgeType">protocol</data>
    </edge>
    
    <!-- Edges: MCP Server to Tools -->
    <edge id="e2" source="mcp-server" target="container-tools">
      <data key="edgeLabel">registers</data>
      <data key="edgeType">registration</data>
    </edge>
    
    <edge id="e5" source="mcp-server" target="executor-tool">
      <data key="edgeLabel">registers</data>
      <data key="edgeType">registration</data>
    </edge>
    
    <!-- Edges: Tools to Managers/Discovery -->
    <edge id="e6" source="container-tools" target="container-manager">
      <data key="edgeLabel">uses</data>
      <data key="edgeType">dependency</data>
    </edge>
    
    <edge id="e7" source="container-tools" target="project-discovery">
      <data key="edgeLabel">uses</data>
      <data key="edgeType">dependency</data>
    </edge>
    
    <edge id="e13" source="executor-tool" target="container-manager">
      <data key="edgeLabel">uses</data>
      <data key="edgeType">dependency</data>
    </edge>
    
    <edge id="e13b" source="executor-tool" target="project-discovery">
      <data key="edgeLabel">uses</data>
      <data key="edgeType">dependency</data>
    </edge>
    
    <!-- Edges: Project Discovery -->
    <edge id="e14" source="project-discovery" target="compose-parser">
      <data key="edgeLabel">uses</data>
      <data key="edgeType">dependency</data>
    </edge>
    
    <edge id="e14b" source="project-discovery" target="types">
      <data key="edgeLabel">uses</data>
      <data key="edgeType">dependency</data>
    </edge>
    
    <edge id="e14c" source="compose-parser" target="types">
      <data key="edgeLabel">uses</data>
      <data key="edgeType">dependency</data>
    </edge>
    
    <!-- Edges: Managers to Docker Client -->
    <edge id="e17" source="container-manager" target="docker-client">
      <data key="edgeLabel">uses</data>
      <data key="edgeType">dependency</data>
    </edge>
    
    <!-- Edges: Docker Client to Docker Engine -->
    <edge id="e30" source="docker-client" target="docker-engine">
      <data key="edgeLabel">Docker API</data>
      <data key="edgeType">api</data>
    </edge>
    
    <!-- Edges: Logger usage -->
    <edge id="e31" source="mcp-server" target="logger">
      <data key="edgeLabel">logs to</data>
      <data key="edgeType">logging</data>
    </edge>
    
    <edge id="e32" source="container-manager" target="logger">
      <data key="edgeLabel">logs to</data>
      <data key="edgeType">logging</data>
    </edge>
    
    <edge id="e33" source="project-discovery" target="logger">
      <data key="edgeLabel">logs to</data>
      <data key="edgeType">logging</data>
    </edge>
    
    <edge id="e34" source="container-tools" target="logger">
      <data key="edgeLabel">logs to</data>
      <data key="edgeType">logging</data>
    </edge>
    
    <edge id="e35" source="executor-tool" target="logger">
      <data key="edgeLabel">logs to</data>
      <data key="edgeType">logging</data>
    </edge>
    
    <edge id="e36" source="docker-client" target="logger">
      <data key="edgeLabel">logs to</data>
      <data key="edgeType">logging</data>
    </edge>
    
  </graph>
</graphml>